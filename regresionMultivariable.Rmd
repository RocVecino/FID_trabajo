---
title: "Estudio de análisis de regresión"
author: "Rocío Vecino Torres"
date: "29/12/2021"
output: html_document
---

### Estudio de análisis de regresión

#### Estudio 1: Regresión multivariable 

Vamos a trabajar con un Excel, llamado StudentsPerformance, que contendrá datos de 1.000 observaciones y con 8 variables que tendrá la información de: genero, raza, nivel de estudios de los padres, si comieron, si hicieron el exámen de preparación, y los resultados de los exámenes en Writting, Reading y Matemáticas.

```{r}
#Instalación y uso de tidyverse. Se usará el paquete dplyr para el preprocesamiento y ggplot2 para la visualización
install.packages("tidyverse")
library(tidyverse)
library(ggplot2)
library(dplyr)

```

```{r}
#En un primer lugar cargaremos los datos: 
students_data <- read.csv("StudentsPerformance.csv", sep = ',', head = TRUE)
students_data$id <- NULL
students_data
colnames(students_data)

#Dibujar los resultados de los exámenes de Matemáticas (Math score), Lectura (Reading score) y Escritura (Writing score), en función del resto de variables para observar si hay una relación lineal.

#Math score en función del resto de variables.

#relación entre los resultados del examen de matemáticas y dos variables: el género del estudiante y la preparación para el exámen
ggplot(students_data, aes(x = gender, y = math.score)) + geom_boxplot() + facet_grid(~test.preparation.course)
#relación entre los resultados del examen de matemáticas y la comida del estudiante
ggplot(students_data, aes(x = lunch, y = math.score))+ geom_boxplot()
#relación entre los resultados del examen de matemáticas y el nivel de estudios de los padres
ggplot(students_data, aes(x = parental.level.of.education, y = math.score))+ geom_boxplot()

```

```{r}
#relación entre los resultados del examen de lectura y dos variables: el género del estudiante y la preparación para el exámen
ggplot(students_data, aes(x = gender, y = reading.score)) + geom_boxplot() + facet_grid(~test.preparation.course)
#relación entre los resultados del examen de lectura y la comida del estudiante
ggplot(students_data, aes(x = lunch, y = reading.score))+ geom_boxplot()
#relación entre los resultados del examen de lectura y el nivel de estudios de los padres
ggplot(students_data, aes(x = parental.level.of.education, y = reading.score))+ geom_boxplot()

```
```{r}
#relación entre los resultados del examen de escritura y dos variables: el género del estudiante y la preparación para el exámen
ggplot(students_data, aes(x = gender, y = writing.score)) + geom_boxplot() + facet_grid(~test.preparation.course)
#relación entre los resultados del examen de escritura y la comida del estudiante
ggplot(students_data, aes(x = lunch, y = writing.score))+ geom_boxplot()
#relación entre los resultados del examen de escritura y el nivel de estudios de los padres
ggplot(students_data, aes(x = parental.level.of.education, y = writing.score))+ geom_boxplot()

```
Ahora se realizara la comparacion entre los examenes, el género y la raza o etnia

```{r}
ggplot(students_data, aes(x = gender, y = math.score)) + geom_boxplot() + facet_grid(~race.ethnicity)

ggplot(students_data, aes(x = gender, y = reading.score)) + geom_boxplot() + facet_grid(~race.ethnicity)

ggplot(students_data, aes(x = gender, y = writing.score)) + geom_boxplot() + facet_grid(~race.ethnicity)

```
Comparación entre los resultados de los examenes: 

```{r}
ggplot(students_data, aes(x = math.score, y = reading.score)) + geom_point()

ggplot(students_data, aes(x = writing.score, y = reading.score)) + geom_point()

ggplot(students_data, aes(x = writing.score, y = math.score)) + geom_point()

```

2. Construimos el modelo lineal para predecir el resultado de los examenes en funcion del resto de variables.

Creamos los datasets de entrenamiento y de pruebas (test). De tal forma que usamos 800 observaciones de entrenamiento y 200 para las pruebas de test.  

```{r}
set.seed(1)
sample = sample(nrow(students_data), floor(nrow(students_data) * 0.8))
datos_entrenamiento = students_data[sample,]
datos_test = students_data[-sample,]

dim(datos_entrenamiento)
dim(datos_test)
```

Creamos el modelo predictivo para cada uno de los examenes. 

Modelo para matematicas:
```{r}
model_math = lm(math.score~.,data = students_data)
summary(model_math)
```












